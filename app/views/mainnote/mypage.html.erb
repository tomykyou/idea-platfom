<%= link_to "New Article", new_mainnote_path %>
<%= link_to "マイページへ", mainnnote_mypage_path %>
<%= link_to "このサイトについて", mainnnote_about_path %>
<%= link_to "投稿者一覧へ", mainnnote_usershow_path %>
<%= link_to "ログアウト", destroy_user_session_path, method: :delete %>

<h2>「マイページ」</h2>

<h2>一言</h2>
<h1><%= current_user.award%></h1>

<img src=<%= @current_user.image %> width="100" height="60">
<!--ポイントをview上で計算-->
<% all_point=0%>
<% future_point=0%>
<% surprisingly_point=0%>
<% realization_point=0%>
<!--DBに格納してもいいが更新処理に時間がかかるため下記やり方に変更。自身の投稿に紐づくコメントの個数分ポイントを合計する-->
<% @notecomment.each do |notecomment| %>
    <%future_point+=notecomment.future_point%>
    <%surprisingly_point+=notecomment.surprisingly_point%>
    <%realization_point+=notecomment.realization_point%>
<% end %>

<%all_point=future_point+surprisingly_point+realization_point%>
<h3>あなたのランクは・・・・</h3>
<% if all_point<2 && all_point>=0%>
  <img src="/assets/Norank.png" width="100" height="100">
<% elsif  all_point<4 && all_point>=2%>
  <img src="/assets/Bronze.png" width="100" height="100">
<% elsif  all_point<6 && all_point>=4%>
  <img src="/assets/Gold.png" width="100" height="100">
<% elsif  all_point<8 && all_point>=6%>
  <img src="/assets/Diamond.png" width="100" height="100">
<% elsif all_point>=8%>
  <h1>ダイヤモンドランク</h1>
<%end%>

<h3>獲得ポイント総計</h3>
<p><%=all_point%>pt</p>

<h3>種別獲得ポイント</h3>

<strong>欲しいポイント</strong>
<p><%=future_point%>pt<p>

<strong>意外さポイント</strong>
<p><%=surprisingly_point%>pt<p>

<strong>面白さポイント</strong>
<p><%=realization_point%>pt<p>

<h3>あなたの投稿一覧</h3>
<ul>
  <% @mainnote.each do |mainnote| %>
    <li>
      <%= link_to mainnote.title, mainnote %>
    </li>
  <% end %>
</ul>

<%= link_to ' TOPへ', root_path %>
<%= link_to ' 登録情報編集', edit_user_registration_path %>